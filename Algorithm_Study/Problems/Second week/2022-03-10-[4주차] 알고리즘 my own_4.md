# [4ì£¼ì°¨] ì•Œê³ ë¦¬ì¦˜ my own ë„¤ ë²ˆì§¸ ë¬¸ì œ

## ğŸ’¬ [Lowest Common Ancestor of a Binary Tree](https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/) 

### ğŸ“„ ë¬¸ì œ ì„¤ëª…  

Given a binary tree, find the lowest common ancestor (LCA) of two given nodes in the tree.

According to the `definition of LCA on Wikipedia`: â€œThe lowest common ancestor is defined between two nodes `p` and `q` as the lowest node in `T` that has both `p` and `q` as descendants (where we allow **a node to be a descendant of itself**).â€

### â›”ï¸ ì œí•œì‚¬í•­
- The number of nodes in the tree is in the range `[2, 10^5]`.
- `-10^9 <= Node.val <= 10^9`
- All `Node.val` are **unique**.
- `p != q`
- `p` and `q` will exist in the tree.

### ğŸ’­ ì…ì¶œë ¥ ì˜ˆ

<div class="notice--primary" markdown="1">
ğŸŒ <u>ì…ì¶œë ¥ ì˜ˆ #1</u>     

<img width="223" alt="Screen Shot 2022-03-11 at 6 46 58 PM" src="https://user-images.githubusercontent.com/63195670/157842991-0e56eae8-0069-45a7-88be-37a67db176ac.png">     

[ì…ë ¥]   

   ```python
root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
   ```             
      
    
[ì¶œë ¥]    

   ```python    
3      
   ```
</div>   


<div class="notice--primary" markdown="1">
ğŸŒ <u>ì…ì¶œë ¥ ì˜ˆ #2</u>     

<img width="223" alt="Screen Shot 2022-03-11 at 6 46 58 PM" src="https://user-images.githubusercontent.com/63195670/157842991-0e56eae8-0069-45a7-88be-37a67db176ac.png">     

[ì…ë ¥]   

   ```python
root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4   
   ```             
      
    
[ì¶œë ¥]    

   ```python    
5      
   ```
   
</div>   

<div class="notice--primary" markdown="1">
ğŸŒ <u>ì…ì¶œë ¥ ì˜ˆ #3</u>       

[ì…ë ¥]   

   ```python
root = [1,2], p = 1, q = 2   
   ```             
      
    
[ì¶œë ¥]    

   ```python    
1      
   ```
   
</div>  

### âœï¸ Question Clarifying & Time, Space Complexity 


   ```python
'''
const template = {
  firstStep: {
    I: binary tree, 
    O: the lowest common ancestor (LCA) of two given nodes in the tree : pì™€ që¥¼ ëª¨ë‘ ìì‹ë…¸ë“œë¡œ ê°–ëŠ” ê°€ì¥ ë‚®ì€ ë¶€ëª¨ë…¸ë“œ ì°¾ê¸°, 
    C: The number of nodes in the tree is in the range [2, 10^5], -10^9 <= Node.val <= 10^9, All Node.val are unique, p != q, p and q will exist in the tree, we allow a node to be a descendant of itself
    E: ë…¸ë“œì˜ ê°œìˆ˜ê°€ 2 -> ROOT VAL ë¦¬í„´
  },
  secondStep: {
    DS: 'DFS',
    Alg: 'ê²½ë¡œ ì €ì¥ -> ê²¹ì¹˜ëŠ” ê°€ì¥ ë‚®ì€ ì¸µ ìˆ˜ ë¦¬í„´',
    bruteForce: solution = () => {
        // pseudo code
        ê²½ë¡œ ì €ì¥ in list 
        pë‚˜ q ì°¾ìœ¼ë©´ ê°ê° ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
        ëª¨ë‘ ëë‚œ í›„, ë‘ ë¦¬ìŠ¤íŠ¸ì—ì„œ ê²¹ì¹˜ëŠ” ê°€ì¥ ë‚®ì€ ì¸µì˜ node ë¦¬í„´ (by pop)
    }
    time: O(N + 2logN) = O(N) -> 2ë²ˆ listë¥¼ copyí•´ì„œ ì˜®ê²¨ ì ìŒ,
    space: O(logN + N) = O(N) -> recursion to tree's depth(height) + array
  },
  thirdStep: {
    DS: 'DFS',
    Alg: 'ë…¸ë“œ í™•ì¸: pë‚˜ q ì°¾ì•˜ë‹¤. / return / ì˜¤ë¥¸ìª½ ë³¸ë‹¤. ë§Œì•½ ì—†ìœ¼ë©´ ì „ì— í™•ì¸í•œ ë…¸ë“œì„ (ì™œëƒí•˜ë©´ ì˜¤ë¥¸ìª½ì— ì—†ë‹¤ëŠ” ëœ»ì€ ì™¼ìª½ ì•„ë˜ì— í•˜ë‚˜ ìˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ) ìˆë‹¤ë©´ ë£¨íŠ¸ ë…¸ë“œ',
    optimalSolution: solution = () => {
        // pseudo code
        ì™¼ìª½ ë³¸ë‹¤
        pë‚˜ q ì°¾ì•˜ë‹¤. -> return 
        ì˜¤ë¥¸ìª½ ë³¸ë‹¤.
        ë‘˜ë‹¤ ìˆìœ¼ë©´ ë£¨íŠ¸ ë…¸ë“œ, í•œìª½ë§Œ ìˆìœ¼ë©´ ê·¸ í•œìª½ ë¦¬í„´
    },
    time: O(N) -> ëª¨ë“  ë…¸ë“œ ë°©ë¬¸,
    space: O(logN) -> recursion to tree's depth(height),
  },
  fourthStep: {
    actualSolution: () => {
      /// Actual Code
      ì•„ë˜ì—ì„œ í™•ì¸í•˜ì!
    }
  },
  fifthStep: {
    testCases: (givenInput, expectedOutput, func) => {

      const result = func(givenInput)
      if(result === expectedOutput) {
         println(`SUCCESS(O)`)
      } else {
         println(`FAILED(X)`)
      }
      
    }
    SUCCESS ì„±ê³µ!
  }
}
'''
   ```

### âœï¸ First Thought Solution(Explanation) 

ì´ ë¬¸ì œ ì—­ì‹œ ì£¼ Data StructureëŠ” **"<u>DFS</u>"**. 

ì¼ë‹¨ ì£¼ì–´ì§„ ì¡°ê±´ëŒ€ë¡œ í•¨ìˆ˜ ì„ ì–¸ ë¨¼ì € í•´ë³´ì.

```python
class Solution(object):
    def lowestCommonAncestor(self, root, p, q):
```     

ì²˜ìŒ ë‚´ê°€ ìƒê°í–ˆë˜ í•´ê²°ë°©ë²•ì€ ì´ëŸ¬í•˜ë‹¤. **`DFS ë°©ì‹`ìœ¼ë¡œ `tree`ë¥¼ ëŒë˜, <u>ê²½ë¡œë¥¼ `list`ì— ì €ì¥</u>í•˜ëŠ” ê²ƒ**ì´ë‹¤. `p`ë‚˜ `q`ë¥¼ ì°¾ì§€ ëª»í•˜ê³  ê°€ì¥ ê¹Šê²Œ ë“¤ì–´ê°€ë©´ `return`ì„ í•˜ê³ , **`p`ë‚˜ `q`ë¥¼ ì°¾ìœ¼ë©´ <u>ê°ê° ë‹¤ë¥¸ `list`ë¥¼ ì„ ì–¸í•˜ì—¬ ì´ì— ê²½ë¡œë¥¼ ì €ì¥</u>**í•œë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  íŠ¸ë¦¬ë¥¼ ëŒê³  `p`ì™€ `q`ë¥¼ ì°¾ì•˜ë‹¤ë©´, ì´ **<u>ë‘ ê°œì˜ `list`ë¥¼ ë¹„êµ(`pop()`ì„ ì´ìš©)</u>í•˜ì—¬ ê°€ì¥ ë§ë‹¨ì— ìˆëŠ” ë™ì¼í•œ ê°’ì„ ì°¾ì€ í›„, ì´ë¥¼ `return`**í•˜ë©´ ë!        

ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ìš°ì„  current ê²½ë¡œë¥¼ ì €ì¥í•  list, `p`ë‚˜ `q`ë¥¼ ì°¾ìœ¼ë©´ ì´ ê²½ë¡œë¥¼ ì €ì¥í•  ê°ê°ì˜ `list` 2ê°œë¥¼ ì„ ì–¸í•˜ê³  ì´ˆê¸°í™”í•˜ì.     

```python
self.answer = []
self.answer_p = []
self.answer_q = []
```

ë‹¤ìŒìœ¼ë¡œ, `dfs` í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ë³´ì.       

```python
def dfs(self, current_node, p, q):     
```

**<u>`end clause`</u>ë¡œ, í˜„ì¬ ë³´ê³  ìˆëŠ” ë…¸ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ, ì¦‰, ê²½ë¡œê°€ ëë‚¬ì„ ë•Œì—ëŠ” return**í•´ì£¼ì.            
 
   ```python
if not current_node:
	return
   ```

**<u>`current_node`ê°€ ì¡´ì¬</u>í•œë‹¤ë©´ (Noneì´ ì•„ë‹ˆë¼ë©´), ì¼ë‹¨ current ê²½ë¡œë¥¼ ì €ì¥í•˜ëŠ” <u>`list` `answer`ì— append</u>** í•´ì¤€ë‹¤.     

```python
self.answer.append(current_node)
```

ë§Œì•½ í˜„ì¬ ë³´ê³  ìˆëŠ” ë…¸ë“œê°€ **<u>`p`</u>ë‚˜, <u>`q`</u>ë¼ë©´ ê°ê° `answer_p`ë‚˜, `answer_q`ì— <u>current ê²½ë¡œ`(self.answer)`ë¥¼ ëŒ€ì…</u>**í•´ì£¼ì.     

```python
# í˜„ì¬ ë³´ê³  ìˆëŠ” ë…¸ë“œê°€ pì¼ë•Œ 
if current_node == p:
	# answerë¥¼ ë°”ê¿”ë„ answer_pê°€ ë°”ë€Œì§€ ì•ŠìŒ
	self.answer_p = list(self.answer)
        
elif current_node == q:
	self.answer_q = list(self.answer)
```

<div class="notice--primary" markdown="1">
ğŸ™‹ğŸ»â€â™€ï¸ <strong><u>ì—¬ê¸°ì„œ ì ê¹!</u> ì™œ ê·¸ëƒ¥ <code>answer</code> <code>list</code>ë¥¼ ëŒ€ì…í•˜ì§€ ì•Šê³ , êµ³ì´ <code>list</code> í˜•íƒœë¡œ ë°”ê¾¸ëŠ” ì‘ì—…ì„?</strong>   

ê·¸ëƒ¥ <code>self. answer_p = self.answer</code> í•´ë²„ë¦¬ë©´, ì„œë¡œ ë‹¤ë¥¸ í¬ì¸í„° <code>answer_p</code>, <code>answer</code>ê°€ í•œ ê°’ì„ ê°€ë¦¬í‚¤ëŠ” ê¼´ì´ ë˜ì–´ë²„ë¦°ë‹¤. ì¦‰, <code>answer</code>ëŠ” ê²½ë¡œë§ˆë‹¤ ë°”ë€ŒëŠ” <code>list</code>ì´ë¯€ë¡œ, <code>answer_p</code>ë„ ê°™ì´ ë°”ë€Œì–´ ë²„ë¦¬ëŠ” ê²ƒ..!   

</div>


ê·¸ ë‹¤ìŒ, í˜„ì¬ ë…¸ë“œì˜ ì™¼ìª½, ì˜¤ë¥¸ìª½ì— ëŒ€í•´ì„œë„ ë™ì¼í•œ `dfs` ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.      

```python
self.dfs(current_node.left, p, q)
self.dfs(current_node.right, p, q) 
```

**`current_node`ì˜ ì™¼ìª½, ì˜¤ë¥¸ìª½ ë…¸ë“œë¥¼ ëª¨ë‘ í™•ì¸í–ˆë‹¤ë©´ <u>ë‹¤ì‹œ ìœ„ì¸µ(ë¶€ëª¨ ë…¸ë“œ) ìŠ¤íƒìœ¼ë¡œ ëŒì•„ê°€ì•¼ í•˜ë¯€ë¡œ, í˜„ì¬ ê²½ë¡œì—ì„œë„ ìì‹ ë…¸ë“œëŠ” ë¹¼ ì¤˜ì•¼ê² ì§€</u>. ë”°ë¼ì„œ `answer`ì—ì„œ `pop()`ì„ í•´ì£¼ì.**        

```python
if current_node:
	self.answer.pop()
```

ì, ì´ë ‡ê²Œ í•´ì„œ `dfs` í•¨ìˆ˜ëŠ” ì™„ì„±í–ˆë‹¤.    
ê·¸ëŸ¼ ë‹¤ì‹œ ê¸°ì¡´ í•¨ìˆ˜ì¸ `lowestCommonAncestor`ë¡œ ëŒì•„ê°€ì„œ ì™„ì„±í•´ë³´ì.     
ì¼ë‹¨ `root`ë¥¼ `current_node`ì— ëŒ€ì…í•˜ì—¬ `dfs`ë¥¼ ìˆ˜í–‰í•´ì£¼ê³ , ì´ í•¨ìˆ˜ ì‘ì—…ì´ ëë‚˜ê³  ë¦¬í„´ë˜ë©´, **<u>`answer_p`ì—ëŠ” ë£¨íŠ¸ì—ì„œ `p`ê¹Œì§€ì˜ ê²½ë¡œ ë…¸ë“œë“¤ì´, `answer_q`ì—ëŠ” ë£¨íŠ¸ì—ì„œ `q`ê¹Œì§€ì˜ ê²½ë¡œ ë…¸ë“œë“¤ì´ ë“¤ì–´ìˆì„ ê²ƒ</u>**ì´ë‹¤.    

ìš°ë¦¬ëŠ” `answer_p`ì—ì„œ ì›ì†Œë“¤ì„ í•˜ë‚˜ì”© **`pop()`**í•´ì£¼ë©° `answer_q`ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ í›„, ì¡´ì¬í•œë‹¤ë©´ ì´ë¥¼ ë¦¬í„´í•´ì£¼ë©´ ë.       

```python
answer = 0

while(1):
	element = self.answer_p.pop()
	if element in self.answer_q:
		answer = element
		break
        
return answer
```

<div class="notice--primary" markdown="1">
ğŸ™‹ğŸ»â€â™€ï¸ <strong><u>ì—¬ê¸°ì„œ ì ê¹!</u> êµ³ì´ pop()ì„?</strong>   

ì´ ë¬¸ì œì—ì„œëŠ” <strong><u>lowest common ancestor</u></strong>ë¥¼ ì°¾ê³  ìˆìœ¼ë¯€ë¡œ! ê°€ì¥ ë’¤ì—ì„œë¶€í„° ì°¾ëŠ” ê²ƒì´ ë§ë‹¤.         

</div>

### âœï¸ Final Code of First Thought

   ```python
class Solution(object):
    def lowestCommonAncestor(self, root, p, q):

        self.answer = []
        self.answer_p = []
        self.answer_q = []
        
        self.dfs(root, p, q)
        
        answer = 0
        
        while(1):
            element = self.answer_p.pop()
            if element in self.answer_q:
                answer = element
                break
        
        return answer



    def dfs(self, current_node, p, q):

        # í˜„ì¬ ë³´ê³  ìˆëŠ” ë…¸ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ : ê²½ë¡œ the end
        if not current_node:
            return
        
        self.answer.append(current_node)

        # í˜„ì¬ ë³´ê³  ìˆëŠ” ë…¸ë“œê°€ pì¼ë•Œ 
        if current_node == p:
            # answerë¥¼ ë°”ê¿”ë„ answer_pê°€ ë°”ë€Œì§€ ì•ŠìŒ
            self.answer_p = list(self.answer)
        
        elif current_node == q:
            self.answer_q = list(self.answer)

        self.dfs(current_node.left, p, q)
        self.dfs(current_node.right, p, q) 
        if current_node:
            self.answer.pop()  
   ```
 
### âœï¸ Second Thought Solution(Explanation) 

ì²« ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•œ í›„, ì‚¬ì‹¤ ìƒˆì‚¼ ë¿Œë“¯í–ˆë‹¤..ğŸ‘€      
í•˜ì§€ë§Œ `Discussion`ì„ ë³´ê³ ..ë‹¤ì‹œ...ğŸ¤¦ğŸ»â€â™€ï¸    
ë‘ ë²ˆì§¸ ë°©ë²•ë„ ì‚¬ì‹¤ ë¹„ìŠ·í•˜ì§€ë§Œ í›¨ì”¬ ê°„ë‹¨í•˜ë‹¤. **ë…¸ë“œë¥¼ í™•ì¸í•˜ê³ , <u>ë§Œì•½ ë…¸ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜</u>, <u>`p`</u>, <u>`q`</u>ë¼ë©´ ë…¸ë“œ ìì²´ë¥¼ ë¦¬í„´**.       

```python
if root in (None, p, q): 
            return root
```

ì´ í•¨ìˆ˜ë¥¼ ì—­ì‹œ **ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ë…¸ë“œì—ì„œë„ ë™ì¼í•˜ê²Œ ì ìš©í•œ í›„, ë¦¬í„´ ê°’ì„ ê°ê° <u>`left`</u>, <u>`right`</u>ë¡œ ë†“ëŠ”ë‹¤**.     

```python
left = self.lowestCommonAncestor(root.left, p, q)
right = self.lowestCommonAncestor(root.right, p, q)
```

**`root`ì— ëŒ€í•´ì„œ <u>ë‘ ê°œ ëª¨ë‘ ìì‹ ë…¸ë“œì˜ ë¦¬í„´ ê°’ì´ ì¡´ì¬í•œë‹¤</u>ë©´(`p`ì™€ `q`ì— ëª¨ë‘ ì—°ê²°ëœ ë¶€ëª¨ ë…¸ë“œë¼ëŠ” ëœ»ì´ê² ì§€!), <u>`root`ë¥¼ ë¦¬í„´</u>í•˜ê³ , <u>í•œìª½ë§Œ ì¡´ì¬í•œë‹¤</u>ë©´ í•œìª½ì—ì„œë§Œ ë°œê²¬ë˜ì—ˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ, ì¼ë‹¨ <u>ê·¸ ë¦¬í„´ ê°’ì„ ë‹¤ì‹œ ë°˜í™˜</u>í•œë‹¤. (ìœ„ìª½ ë…¸ë“œê¹Œì§€ ëŒê³  ê°€ì•¼í•˜ë¯€ë¡œ).**         
ë§Œì•½ **`root` ë…¸ë“œê°€ ë§ˆì§€ë§‰, ì¦‰, <u>ìµœìƒë‹¨ ë…¸ë“œ</u>ì˜€ë‹¤ë©´, <u>í•œìª½ì— ë‘ê°œ ë‹¤ ìˆë‹¤</u>ëŠ” ëœ»ì´ë¯€ë¡œ ê·¸ <u>í•œìª½ ë¦¬í„´ê°’ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜</u>**í•˜ë©´ ëœë‹¤.                

```python
# ë‘ ê°œë‹¤ ì—°ê²°ë˜ëŠ” ë¶€ëª¨ ë…¸ë“œë¼ëŠ” ëœ»ì´ë¯€ë¡œ root ë¦¬í„´
if left and right:
	return root
        
# leftìª½ì—ì„œë§Œ í•˜ë‚˜ ë°œê²¬ -> ìœ„ ë…¸ë“œê¹Œì§€ ëŒê³  ê°€ì•¼ê² ì§€.
# ë§ˆì§€ë§‰ê¹Œì§€ leftë§Œì´ë¼ë©´ leftìª½ì— ë‘ê°œ ë‹¤ ìˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ left ë°˜í™˜(since a node can be a descendant of itself)
elif left:
	return left
        
# rightìª½ì—ì„œë§Œ í•˜ë‚˜ ë°œê²¬ -> ìœ„ ë…¸ë“œê¹Œì§€ ëŒê³  ê°€ì•¼ê² ì§€.
# ë§ˆì§€ë§‰ê¹Œì§€ rightë§Œì´ë¼ë©´ rightìª½ì— ë‘ê°œ ë‹¤ ìˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ left ë°˜í™˜(since a node can be a descendant of itself)
elif right:
	return right

```   

### âœï¸ Final Code of Second Thought

   ```python
class Solution:
    def lowestCommonAncestor(self, root, p, q):
        if root in (None, p, q): 
            return root
        
        left = self.lowestCommonAncestor(root.left, p, q)
        right = self.lowestCommonAncestor(root.right, p, q)
        
        if left and right:
            return root
        
        elif left:
            return left
        
        elif right:
            return right
   ```

  
   	    
<div class="notice--primary" markdown="1">
ğŸŒŸ <strong>[4ì£¼ì°¨] my_own_4ì˜ <u>í¬ì¸íŠ¸</u></strong>    

- ë‹¹ì—°íˆ ì¼ë‹¨.. DFS    
- ë¦¬í„´ ê°’ì´ intì¸ì§€, nodeì¸ì§€.. ! í•´ë‹¹ ì˜¤ë¥˜ :'int' object has no attribute 'val'   
- ë‹¤ë¥¸ í¬ì¸í„°ë¡œ ë™ì¼í•œ ê°’ì„ ê°€ë¦¬í‚¤ëŠ” ê²ƒì„ ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë³µì‚¬í•´ì•¼ í•œë‹¤! : <a href="https://inkkim.github.io/python/íŒŒì´ì¬-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/" title="íŒŒì´ì¬ ë¦¬ìŠ¤íŠ¸ ë³µì‚¬">ì°¸ê³ ë§í¬ âœ”ï¸</a>     
     
</div>
